MODULE := zfs

EXTRA_CFLAGS  = -I@MODDIR@/zfs/include
EXTRA_CFLAGS += -I@MODDIR@/zcommon/include
EXTRA_CFLAGS += -I@MODDIR@/avl/include
EXTRA_CFLAGS += -I@MODDIR@/nvpair/include
EXTRA_CFLAGS += -I@MODDIR@/unicode/include
EXTRA_CFLAGS += @KERNELCPPFLAGS@
EXTRA_CFLAGS += -fno-stack-protector

obj-m := ${MODULE}.o

${MODULE}-objs += arc.o
${MODULE}-objs += bplist.o
${MODULE}-objs += dbuf.o
${MODULE}-objs += dmu.o
${MODULE}-objs += dmu_object.o
${MODULE}-objs += dmu_objset.o
${MODULE}-objs += dmu_send.o
${MODULE}-objs += dmu_traverse.o
${MODULE}-objs += dmu_tx.o
${MODULE}-objs += dmu_zfetch.o
${MODULE}-objs += dnode.o
${MODULE}-objs += dnode_sync.o
${MODULE}-objs += dsl_dataset.o
${MODULE}-objs += dsl_deleg.o
${MODULE}-objs += dsl_dir.o
${MODULE}-objs += dsl_pool.o
${MODULE}-objs += dsl_prop.o
${MODULE}-objs += dsl_scrub.o
${MODULE}-objs += dsl_synctask.o
${MODULE}-objs += fletcher.o
${MODULE}-objs += gzip.o
${MODULE}-objs += lzjb.o
${MODULE}-objs += metaslab.o
${MODULE}-objs += refcount.o
${MODULE}-objs += rrwlock.o
${MODULE}-objs += sha256.o
${MODULE}-objs += spa.o
${MODULE}-objs += spa_boot.o
${MODULE}-objs += spa_config.o
${MODULE}-objs += spa_errlog.o
${MODULE}-objs += spa_history.o
${MODULE}-objs += spa_misc.o
${MODULE}-objs += space_map.o
${MODULE}-objs += txg.o
${MODULE}-objs += uberblock.o
${MODULE}-objs += unique.o
${MODULE}-objs += vdev.o
${MODULE}-objs += vdev_cache.o
${MODULE}-objs += vdev_disk.o
${MODULE}-objs += vdev_file.o
${MODULE}-objs += vdev_label.o
${MODULE}-objs += vdev_mirror.o
${MODULE}-objs += vdev_missing.o
${MODULE}-objs += vdev_queue.o
${MODULE}-objs += vdev_raidz.o
${MODULE}-objs += vdev_root.o
${MODULE}-objs += zap.o
${MODULE}-objs += zap_leaf.o
${MODULE}-objs += zap_micro.o
${MODULE}-objs += zfs_acl.o
${MODULE}-objs += zfs_byteswap.o
${MODULE}-objs += zfs_ctldir.o
${MODULE}-objs += zfs_dir.o
${MODULE}-objs += zfs_fm.o
${MODULE}-objs += zfs_fuid.o
${MODULE}-objs += zfs_ioctl.o
${MODULE}-objs += zfs_log.o
${MODULE}-objs += zfs_replay.o
${MODULE}-objs += zfs_rlock.o
${MODULE}-objs += zfs_vfsops.o
${MODULE}-objs += zfs_vnops.o
${MODULE}-objs += zfs_znode.o
${MODULE}-objs += zil.o
${MODULE}-objs += zio.o
${MODULE}-objs += zio_checksum.o
${MODULE}-objs += zio_compress.o
${MODULE}-objs += zio_inject.o
${MODULE}-objs += zvol.o
